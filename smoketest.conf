{
 dbname => 'testers.db' ,
 cpan => { 
          # For downloading individual files (e.g., distroprefs) from CPAN source
          # http://search.cpan.org links to 'http://cpansearch.perl.org/src/'
          # Alternately:
          # http://metacpan.org links to 'https://st.aticpan.org/source/'
          source  => 'http://cpansearch.perl.org/src/',
          # YAML file containing list of modules to be disabled;
          # exists under {author}/CPAN-{version}/distroprefs/ in the
          # source.
          disable => '01.DISABLED.yml',

          # For downloading the full, or most-recent-list of modules.
          testers => 'http://cpan.org/',
          # Which file contains the list of modules?
          #    '02packages.details.txt'  Faster update loop, no version release dates
          all => '02packages.details.txt',
          # File containing list of most-recently added/updated modules
          # Could also use:  http://www.cpan.org/authors/RECENT.recent  (YAML)
          #    '01modules.index.html'    Version release dates, slower DOM-based loop
          recent => '01modules.mtime.html',

          # MetaCPAN API
          metacpan => { release => 'https://fastapi.metacpan.org/v1/release',
                        module => 'https://fastapi.metacpan.org/v1/module',
                      },
         },

 # TODO: Delete the cpan_* and metacpan keys as obsolete, once modifications complete

 cpan_testers => 'http://cpan.cpantesters.org/',

 # For downloading individual files (e.g., distroprefs) from CPAN source
 # http://search.cpan.org links to 'http://cpansearch.perl.org/src/'
 # Alternately:
 # http://metacpan.org links to 'https://st.aticpan.org/source/'
 cpan_source  => 'http://cpansearch.perl.org/src/',

 # Which file contains the list of modules?
 #    '02packages.details.txt'  Faster update loop, no version release dates
 #    '01modules.index.html'    Version release dates, slower DOM-based loop
 cpan_modules => '02packages.details.txt',

 # File containing list of most-recently added/updated modules
 cpan_recent => '01modules.mtime.html',
 # Could also use:  http://www.cpan.org/authors/RECENT.recent  (YAML)

 # YAML file containing list of modules to be disabled
 cpan_disable => '01.DISABLED.yml',

 # MetaCPAN
 metacpan => { release => 'https://fastapi.metacpan.org/v1/release',
               module => 'https://fastapi.metacpan.org/v1/module',
             },

 # Example job list to be applied:
 #   - Download the latest list of Recent modules from CPAN
 #   - Apply the latest Disabled-Modules list(s) to the database
 #   - Select modules that were either added or released within a given
 #     timespan (1 day)
 #   - De-select any module we have tested within a given timespan
 apply => { recent => [ # Recipe name for selection by regex, date, et al
                       cpan_recent  => { # Download CPAN update.
                                        # can override URI by adding here:
                                        # source => 'http://cpan.cpantesters.org/'
                                        newer => '12 hours', # only once a day
                                       },
                       # CPAN's latest yaml file with regex:
                       cpan_disabled => {action => 'disable'},
                       yaml_regex => {action => 'disable',
                                      # NOTE: yaml_regex is alias for cpan_disabled
                                      source => '~/.smoketest.disable.yml',
                                     },
                       released => {select => 1,
                                    newer => '1 day', # Version release date
                                   }, 
                       # Avoid re-testing:
                       tested => {select => 0,
                                  # newer => '1 hour' # with this
                                  # commented-out, once we test a
                                  # release, we never do it again
                                 }, 
                      ],
          },
}
;
